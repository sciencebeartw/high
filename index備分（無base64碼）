<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å±±ç†Šé«˜ä¸­éƒ¨ - å­¸ç”Ÿå°ˆå€</title>
    
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="icon" type="image/png" href="icon.png">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: #f5f5f7;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden; 
        }
        
        /* å•Ÿå‹•ç•«é¢ Logo */
        .splash-logo {
            width: 180px;
            height: auto;
            max-height: 200px;
            background-color: transparent; 
            box-shadow: none;
            border-radius: 0;
            object-fit: contain;
            animation: breathe 2s infinite ease-in-out;
        }

        /* æ•™å­¸å¡ç‰‡ */
        #install-guide {
            display: none; /* é è¨­éš±è— */
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin-top: 30px;
            padding: 25px 20px;
            background: white;
            border-radius: 20px;
            width: 85%;
            max-width: 340px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        
        .guide-logo {
            width: 100px;
            height: auto;
            margin-bottom: 15px;
            object-fit: contain;
            background-color: transparent;
        }

        h1 { font-size: 22px; color: #1d1d1f; margin: 0 0 20px 0; font-weight: 700; }
        
        /* æ­¥é©Ÿæ¸…å–®å®¹å™¨ - ä¿æŒç½®ä¸­ */
        .step-list {
            text-align: left;
            width: fit-content;
            margin: 0 auto 25px auto;
            display: flex;
            flex-direction: column;
        }
        
        /* éš±è—ä¸åŒæ¨¡å¼çš„å€å¡Šï¼Œç”± JS æ§åˆ¶é¡¯ç¤º */
        .mode-block { display: none; }

        .step {
            font-size: 15px;
            color: #444;
            margin-bottom: 15px;
            line-height: 1.6;
            display: flex;
            align-items: flex-start;
        }

        .step-num {
            background: #0071e3;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            text-align: center;
            line-height: 24px;
            font-size: 14px;
            font-weight: bold;
            margin-right: 12px;
            flex-shrink: 0;
            margin-top: 1px;
        }

        /* LINE è­¦å‘Šå€å¡Š */
        #line-warning {
            background-color: #fff4e5;
            color: #663c00;
            padding: 15px;
            border-radius: 12px;
            font-size: 15px;
            margin-bottom: 25px;
            border: 1px solid #ffcc80;
            width: 100%;
            box-sizing: border-box;
            line-height: 1.6;
            text-align: center; /* å¼·åˆ¶ç½®ä¸­ */
        }

        /* --- åœ–ç¤ºç¹ªè£½å€ --- */
        
        /* iOS åˆ†äº«åœ–ç¤º */
        .share-icon {
            display: inline-block;
            width: 20px;
            height: 20px;
            vertical-align: -4px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23007AFF' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8'/%3E%3Cpolyline points='16 6 12 2 8 6'/%3E%3Cline x1='12' y1='2' x2='12' y2='15'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: center;
        }

        /* ç•«å‡ºã€Œç›´ç«‹ä¸‰å€‹é»ã€åœ–ç¤º */
        .dots-icon {
            display: inline-block;
            font-style: normal;
            font-weight: bold;
            font-size: 18px;
            line-height: 1;
            color: #444; /* æ·±ç°è‰² */
            vertical-align: -1px;
            margin: 0 2px;
        }

        .btn {
            background: #0071e3;
            color: white;
            text-decoration: none;
            padding: 12px 30px;
            border-radius: 99px;
            font-size: 16px;
            font-weight: 600;
            display: inline-block;
        }

        @keyframes breathe {
            0% { transform: scale(0.97); opacity: 0.9; }
            50% { transform: scale(1.03); opacity: 1; }
            100% { transform: scale(0.97); opacity: 0.9; }
        }
    </style>
</head>
<body>

    <!-- ğŸ”´ è«‹å¡«å…¥ Base64 æˆ– GitHub åœ–ç‰‡ç¶²å€ -->
    <img src="â˜…â˜…è«‹å¡«å…¥Base64æˆ–åœ–ç‰‡ç¶²å€â˜…â˜…" alt="å±±ç†Šé«˜ä¸­éƒ¨" class="splash-logo">

    <div id="install-guide">
        <!-- ğŸ”´ è«‹å¡«å…¥ Base64 æˆ– GitHub åœ–ç‰‡ç¶²å€ -->
        <img src="â˜…â˜…è«‹å¡«å…¥Base64æˆ–åœ–ç‰‡ç¶²å€â˜…â˜…" class="guide-logo">
        
        <h1>å®‰è£é«˜ä¸­éƒ¨å°ˆå€</h1>

        <div id="guide-line" class="mode-block">
            <div id="line-warning">
                âš ï¸ åµæ¸¬åˆ°æ‚¨æ­£åœ¨ä½¿ç”¨ LINE<br>è«‹ä¾ä¸‹åˆ—æ­¥é©Ÿåˆ‡æ›è‡³<br><strong>ã€Œç€è¦½å™¨ã€</strong>
            </div>
            
            <div class="step-list">
                <div class="step">
                    <div class="step-num">1</div>
                    <div>é»é¸è§’è½çš„ã€Œ <span class="dots-icon">â‹®</span> ã€åœ–ç¤º</div>
                </div>
                <div class="step">
                    <div class="step-num">2</div>
                    <div>é¸æ“‡ <strong>ã€Œåœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿã€</strong><br><span style="font-size:13px; color:#888;">(iPhoneç”¨æˆ¶è«‹ä»¥Safarié–‹å•Ÿ)</span></div>
                </div>
            </div>
        </div>

        <div id="guide-ios" class="mode-block">
            <div class="step-list">
                <div class="step">
                    <div class="step-num">1</div>
                    <div>æ‰¾åˆ°ä¸¦é»æ“Š <span class="share-icon"></span> <strong>åˆ†äº«</strong> æŒ‰éˆ•</div>
                </div>
                <div class="step">
                    <div class="step-num">2</div>
                    <div>æ»‘å‹•é¸å–®ä¸¦é¸æ“‡<strong>ã€ŒåŠ å…¥ä¸»ç•«é¢ã€</strong></div>
                </div>
            </div>
        </div>

        <div id="guide-android" class="mode-block">
            <div class="step-list">
                <div class="step">
                    <div class="step-num">1</div>
                    <div>é»æ“Šå³ä¸Šè§’ <span class="dots-icon">â‹®</span> é¸å–®åœ–ç¤º</div>
                </div>
                <div class="step">
                    <div class="step-num">2</div>
                    <div>é¸æ“‡ <strong>ã€ŒåŠ å…¥ä¸»ç•«é¢ã€</strong><br>æˆ–ã€Œå®‰è£æ‡‰ç”¨ç¨‹å¼ã€</div>
                </div>
            </div>
        </div>

        <a href="#" id="direct-link" class="btn">ç›´æ¥é€²å…¥ç¶²é ç‰ˆ</a>
    </div>

    <script>
        // â˜…â˜…â˜… ä½ çš„ GAS ç¶²å€ (å·²å¡«å…¥) â˜…â˜…â˜…
        const TARGET_URL = "https://script.google.com/macros/s/AKfycbxEAilokM887eUQN-1H1YeoT_TinlibY9S-Di8DlAk_GAigHJjfowShlGklvL0eoMm4PQ/exec";
        
        document.getElementById('direct-link').href = TARGET_URL;

        const isStandalone = window.navigator.standalone === true || window.matchMedia('(display-mode: standalone)').matches;

        // --- æ™ºæ…§åµæ¸¬ç³»çµ± ---
        const ua = navigator.userAgent || navigator.vendor || window.opera;
        
        // 1. åµæ¸¬ LINE
        const isLine = (ua.indexOf("Line") > -1);
        
        // 2. åµæ¸¬ Android
        const isAndroid = /Android/i.test(ua);

        // 3. åµæ¸¬ iOS (iPhone/iPad)
        
        if (isStandalone) {
            // APP æ¨¡å¼ï¼š0ç§’è·³è½‰
            document.getElementById('install-guide').style.display = 'none';
            window.location.replace(TARGET_URL);
        } else {
            // ç€è¦½å™¨æ¨¡å¼ï¼šé¡¯ç¤ºæ•™å­¸
            document.querySelector('.splash-logo').style.display = 'none';
            document.getElementById('install-guide').style.display = 'flex';

            // â˜…â˜…â˜… ä¸‰æ®µè®Šèº«é‚è¼¯ â˜…â˜…â˜…
            if (isLine) {
                // è®Šèº« 1: LINE æ¨¡å¼
                document.getElementById('guide-line').style.display = 'block';
            } else if (isAndroid) {
                // è®Šèº« 2: Android æ¨¡å¼
                document.getElementById('guide-android').style.display = 'block';
            } else {
                // è®Šèº« 3: iOS/å…¶ä»– æ¨¡å¼
                document.getElementById('guide-ios').style.display = 'block';
            }
        }
    </script>

</body>
</html>
